<!DOCTYPE html>
<html>
<head>
    <title>Compare Results</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const cols = {{ columns|tojson }};
            const catSelect = document.querySelector('select[name="category"]');
            cols.forEach(c => {
                let opt = document.createElement('option');
                opt.value = c; opt.text = c;
                if (c === "{{ category }}") opt.selected = true;
                catSelect.add(opt);
            });
        });
    </script>
</head>
<body>
<div class="container">
    <h1>Comparison: {{ date1 }}{% if date2 %} vs {{ date2 }}{% endif %}</h1>
    <div class="compare-container">
        <div class="compare-section">
            {% if table1 %}{{ table1|safe }}{% else %}<p>No data for {{ date1 }}</p>{% endif %}
        </div>
        <div class="compare-section">
            {% if table2 %}{{ table2|safe }}{% else %}<p>No data for {{ date2 }}</p>{% endif %}
        </div>
    </div>
    {% if chart %}
    <div class="chart-container">
        <h2>{{ category }} ({{ unit }})</h2>
        <img src="data:image/png;base64,{{ chart }}" alt="Chart">
    </div>
    {% endif %}
    <a href="/">Back</a>
</div>
</body>
</html>
